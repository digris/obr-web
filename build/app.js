(function(e){function t(t){for(var r,i,u=t[0],c=t[1],f=t[2],s=0,d=[];s<u.length;s++)i=u[s],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,f||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,u=1;u<n.length;u++){var c=n[u];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1b6f":function(e,t,n){"use strict";n("b1e2")},4788:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a=Object(r["f"])("p",null,"...",-1);function o(e,t,n,o,i,u){var c=Object(r["l"])("Player");return Object(r["h"])(),Object(r["c"])(r["a"],null,[a,Object(r["f"])(c,{msg:"Hi!"})],64)}var i=Object(r["o"])("data-v-10004fc6");Object(r["j"])("data-v-10004fc6");var u=Object(r["e"])("\n  "),c={class:"hello"},f=Object(r["e"])("\n    "),l={ref:"audioContainer"},s={id:"audio",ref:"audioPlayer",controls:"controls"},d=Object(r["e"])("\n    "),p=Object(r["e"])("\n    "),b=Object(r["e"])("\n    "),h=Object(r["e"])("\n  "),g=Object(r["e"])("\n");Object(r["i"])();var y=i((function(e,t,n,a,o,i){return Object(r["h"])(),Object(r["c"])(r["a"],null,[u,Object(r["f"])("div",c,[f,Object(r["f"])("div",l,[Object(r["f"])("div",null,[Object(r["f"])("button",{onClick:t[1]||(t[1]=function(e){return i.play(i.liveUrl,-10)})},"LIVE"),Object(r["f"])("button",{onClick:t[2]||(t[2]=function(e){return i.play(i.onDemandUrl)})},"ON DEMAND"),Object(r["f"])("button",{onClick:t[3]||(t[3]=function(e){return i.play(i.onDemandUrl2,0)})},"ON DEMAND 2")]),Object(r["f"])("audio",s,null,512)],512),d,Object(r["f"])("pre",{textContent:Object(r["m"])(i.playhead),class:"debug"},null,8,["textContent"]),p,i.currentState?(Object(r["h"])(),Object(r["c"])("pre",{key:0,textContent:Object(r["m"])(i.currentState.state),class:"debug"},null,8,["textContent"])):Object(r["d"])("",!0),b,Object(r["d"])("",!0),h]),g],64)})),m=(n("c740"),n("2ca0"),n("446e")),O=n.n(m),v={name:"Player",props:{msg:String},computed:{liveUrl:function(){return"https://obr-stream-dash.hazelfire.com/stream.mpd?".concat(Date.now())},onDemandUrl:function(){return"http://media.obr-next.hazelfire.com/encoded/_encoded/F003/manifest.mpd"},onDemandUrl2:function(){return"http://mbp15.local:7777/data/_hls/F002/master.m3u8"},configuration:function(){return this.$store.getters["player/configuration"]},bufferInfo:function(){return this.$store.getters["player/bufferInfo"]},currentState:function(){return this.$store.getters["player/currentState"]},playhead:function(){return this.$store.getters["player/playhead"]}},mounted:function(){var e=this;console.debug("mounted");var t=this.$refs.audioPlayer,n=new O.a.Player(t);window.audio=t,window.player=n,n.configure({manifest:{dash:{ignoreMinBufferTime:!0}},abr:{switchInterval:1,defaultBandwidthEstimate:1e6,bandwidthDowngradeTarget:.8,bandwidthUpgradeTarget:.6},streaming:{bufferingGoal:30,rebufferingGoal:.1,bufferBehind:.1}}),n.getNetworkingEngine().registerRequestFilter((function(e,t){var n="http://media.obr-next.hazelfire.com/";0===t.uris.findIndex((function(e){return e.startsWith(n)}))&&(t.allowCrossSiteCredentials=!0)})),t.addEventListener("ended",(function(t){console.debug("ended",t),e.play(e.liveUrl,-10)})),this.$store.dispatch("player/updateConfiguration",{configuration:n.getConfiguration()}),this.player=n,this.audio=t,setInterval((function(){e.$store.dispatch("player/updateConfiguration",{configuration:n.getConfiguration()})}),5e3),setInterval((function(){e.$store.dispatch("player/updatePlayer",{player:n})}),50)},methods:{play:function(e,t){var n=this;this.player.load(e,t).then((function(){n.$refs.audioPlayer.play()})).catch(this.onError)},onError:function(e){console.error(e)}}};n("1b6f");v.render=y,v.__scopeId="data-v-10004fc6";var j=v,w={name:"App",components:{Player:j}};n("7aae");w.render=o;var S=w,I=n("5502"),P=n("1da1"),E=n("3835"),_=(n("96cf"),n("fb6a"),{configuration:{},bufferInfo:{},currentState:null,playhead:{}}),C={configuration:function(e){return e.configuration},bufferInfo:function(e){return e.bufferInfo},currentState:function(e){return e.currentState},playhead:function(e){return e.playhead}},x={SET_CONFIGURATION:function(e,t){var n=t.configuration;e.configuration=n},SET_BUFFER_INFO:function(e,t){var n=t.bufferInfo;if(e.bufferInfo=n,n.stateHistory.length){var r=n.stateHistory.slice(-1),a=Object(E["a"])(r,1);e.currentState=a[0]}else e.currentState=null},SET_PLAYHEAD:function(e,t){var n=t.playhead;e.playhead=n}},T={updateConfiguration:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.configuration,t.commit("SET_CONFIGURATION",{configuration:r});case 2:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),updatePlayer:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.player,a=r.getPlayheadTimeAsDate(),o=r.getStats(),t.commit("SET_BUFFER_INFO",{bufferInfo:o}),t.commit("SET_PLAYHEAD",{playhead:a});case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},D={namespaced:!0,state:_,getters:C,mutations:x,actions:T},U=Object(I["a"])({namespaced:!0,modules:{player:D},mutations:{},actions:{},plugins:[]});Object(r["b"])(S).use(U).mount("#app")},"7aae":function(e,t,n){"use strict";n("4788")},b1e2:function(e,t,n){}});
//# sourceMappingURL=app.js.map